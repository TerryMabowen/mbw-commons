<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>开启头部工具栏 - 数据表格</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<link rel="stylesheet" href="../../../static/layui/css/layui.css" media="all">
		<link rel="stylesheet" href="../../../static/style/admin.css" media="all">
		<link rel="stylesheet" type="text/css" href="../../../static/style/formSelects.css"/>
		<link rel="stylesheet" href="../../../static/style/dropdown.css" media="all">
		<link rel="stylesheet" href="../../../static/style/fastui.css" media="all">
	</head>
	<body>
		<div class="layui-fluid">
			<div class="layui-row layui-col-space15">
				<div class="layui-col-md12">
					<div class="layui-card">
						<div class="layui-card-header fastui-card-header">
							<script type="text/html" template>
								<span>{{localStorage.getItem("title")}}</span>
							</script>
							<div class="fastui-card-header-right">
								<a layadmin-event="iframeRefresh"><i class="layui-icon layui-icon-refresh"></i>刷新</a>
							</div>
						</div>
						<div class="layui-card-body">
							<div class="fastui-toolbar-con">
								<form class="layui-form fastui-form-seacher layui-row">
									<fieldset class="layui-elem-field layui-field-title fastui-field-color">
										<legend>基本查询条件</legend>
									</fieldset>
									<div class="layui-col-space20">
										<div class="layui-col-xs3">
											<div class="layui-input-inline">
												<select name="select-resulte" xm-select="select1" xm-select-skin="default">>
													<option value="">请选择</option>
													<option value="0">北京校区</option>
													<option value="1">成都校区</option>
													<option value="2">深圳校区</option>
												</select>
											</div>
										</div>
										<div class="layui-col-xs3">
											<div class="layui-col-xs3 layui-col-space1">
												<div class="layui-input-inline">
													<select name="">
														<option value="">请选择</option>
														<option value="0">地推</option>
														<option value="1">转介绍</option>
														<option value="2">网络</option>
													</select>
												</div>
											</div>
											<div class="layui-col-xs9">
												<div class="layui-input-inline">
													<input type="text" id="fastui-seacher-date" name="data" autocomplete="off" placeholder="日期" class="layui-input">
												</div>
											</div>
										</div>
										<div class="layui-col-xs3">
											<div class="layui-input-inline">
												<select name="">
													<option value="">请选择</option>
													<option value="0">名单状态</option>
													<option value="1">成都校区</option>
													<option value="2">深圳校区</option>
												</select>
											</div>
										</div>
										<div class="layui-col-xs3">
											<div class="layui-input-inline">
												<select name="">
													<option value="">请选择</option>
													<option value="0">名单状态</option>
													<option value="1">成都校区</option>
													<option value="2">深圳校区</option>
												</select>
											</div>
										</div>
									</div>
									<div class="layui-col-space20">
										<div class="layui-col-xs3">
											<div class="layui-input-inline">
												<input type="text" id="fastui-seacher-date" name="data" autocomplete="off" placeholder="日期" class="layui-input">
											</div>
										</div>
										<div class="layui-col-xs3">
											<div class="layui-input-inline">
												<input type="text" id="fastui-seacher-date1" name="data" autocomplete="off" placeholder="日期" class="layui-input">
											</div>
										</div>
										<div class="layui-col-xs3">
											<div class="layui-input-inline">
												<input type="text" id="fastui-seacher-date2" name="data" autocomplete="off" placeholder="日期" class="layui-input">
											</div>
										</div>
										<div class="layui-col-xs3">
											<div class="layui-input-inline">
												<input type="text" id="fastui-seacher-date3" name="data" autocomplete="off" placeholder="日期" class="layui-input">
											</div>
										</div>
									</div>
									<div class="fastui-seachertab-more" style="display: none;">
										<fieldset class="layui-elem-field layui-field-title fastui-field-color">
											<legend>更多查询条件</legend>
										</fieldset>
										<div class="layui-col-space20">
											<div class="layui-col-xs3">
												<div class="layui-input-inline">
													<input type="number" name="phone" lay-verify="phone" autocomplete="off" placeholder="请搜索手机号" class="layui-input">
												</div>
											</div>
											<div class="layui-col-xs3">
												<div class="layui-input-inline">
													<select name="">
														<option value="">请选择</option>
														<option value="0">北京校区</option>
														<option value="1">成都校区</option>
														<option value="2">深圳校区</option>
													</select>
												</div>
											</div>
											<div class="layui-col-xs3">
												<div class="layui-input-inline">
													<select name="">
														<option value="">请选择</option>
														<option value="0">北京校区</option>
														<option value="1">成都校区</option>
														<option value="2">深圳校区</option>
													</select>
												</div>
											</div>
											<div class="layui-col-xs3">
												<div class="layui-input-inline">
													<input type="text" name="name" lay-verify="" autocomplete="off" placeholder="请搜索客户姓名" class="layui-input">
												</div>
											</div>
										</div>
									</div>
									<div class="layui-col-xs12">
										<div class="right">
											<a href="javascript:;" class="fastui-seachertab-hide">更多查新条件<i class="layui-icon">&#xe61a;</i></a>
											<a href="javascript:;" class="fastui-seachertab-hide">点击收起<i class="layui-icon">&#xe619;</i></a>
											<button class="layui-btn fastui-btn"><i class="layui-icon">&#xe615;</i>查询</button>
											<button class="layui-btn layui-btn-primary">重置</button>
										</div>
									</div>
								</form>
							</div>
							<div class="layui-row fastui-seacher-tabbar">
								<div class="fastui-seacher-tabbar-tatol fastui-this">
									<span>546</span>
									<p>查询结果</p>
								</div>
								<div class="fastui-seacher-tabbar-right">
									<div class="fastui-seacher-tabbar-flex">
										<div class="fastui-seacher-bg">
											<div class="fastui-seacher-type-title">
												<div>按品牌分</div>
											</div>
											<div class="fastui-seacher-type-con">
												<a href="javascript:;">
													<span>546</span>
													<p>查询结果</p>
												</a>
											</div>
											<div class="fastui-seacher-type-con">
												<a href="javascript:;">
													<span>546</span>
													<p>查询结果</p>
												</a>
											</div>
											<div class="fastui-seacher-type-con">
												<a href="javascript:;">
													<span>546</span>
													<p>查询结果</p>
												</a>
											</div>
										</div>
										<div class="fastui-seacher-bg">
											<div class="fastui-seacher-type-title">
												<div>按品牌分</div>
											</div>
											<div class="fastui-seacher-type-con">
												<a href="javascript:;">
													<span>546</span>
													<p>查询结果</p>
												</a>
											</div>
											<div class="fastui-seacher-type-con">
												<a href="javascript:;">
													<span>546</span>
													<p>查询结果</p>
												</a>
											</div>
											<div class="fastui-seacher-type-con">
												<a href="javascript:;">
													<span>546</span>
													<p>查询结果</p>
												</a>
											</div>
										</div>
									</div>
								</div>
							</div>
							<!--开启头部工具条只有一个显示列的功能按钮在table外层加div和类名fastui-table-toolbar-first-->
							<div class="fastui-table-toolbar-first">
								<table class="layui-hide" id="test-table-toolbar" lay-filter="test-table-toolbar"></table>
							</div>
						</div>
					</div>
				</div>
			</div>
            <script type="text/html" template>
              <div class="fastui-version">{{ layui.admin.systemName }}<span>v{{ layui.admin.v }}</span>build:{{layui.admin.build}}</div>
            </script>
		</div>
		<script type="text/html" id="test-table-toolbar-toolbarDemo">
			<div class="layui-btn-container">
				<button class="layui-btn fastui-btn" lay-event="getCheckData">获取选中行数据</button>
				<button class="layui-btn fastui-btn" lay-event="getCheckLength">获取选中数目</button>
				<button class="layui-btn fastui-btn" lay-event="isAll">验证是否全选</button>
				<div class="fastui-toolbar-btn right">
					<button class="layui-btn layui-btn-primary">导出客户</button>
				</div>
			</div>
		</script>
		<script type="text/html" id="test-table-toolbar-barDemo">
			<div class="urp-dropdown urp-dropdown-table fastui-table-toolbar-color">
					<a lay-event="edit">编辑</a>
					<a lay-event="del">删除</a>
			    <a class="urp-dropdown-btn">更多</a>
			</div>
		</script>

		<script src="../../../static/layui/layui.js"></script>
		<script>
			layui.config({
				base: '../../../static/' //静态资源所在路径
			}).extend({
				index: 'lib/index' //主入口模块
			}).use(['jquery', 'index', 'table','dropdown','laydate','formSelects'], function($) {
				var admin = layui.admin,
					table = layui.table,
					laydate=layui.laydate,
					formSelects = layui.formSelects,
					dropdown=layui.dropdown;
				
		  		laydate.render({
		  			elem:'#fastui-seacher-date'
		  			,range: true
					,theme: 'date-color'
					,done:function(value, date, endDate){
						console.log(value);
						console.log(date);
						console.log(endDate);
					}
					
		  		})
				
				table.render({
					elem: '#test-table-toolbar'
					,url: layui.setter.base + 'json/table/demo.js'
					,size:'sm'
					,toolbar: '#test-table-toolbar-toolbarDemo'
					,defaultToolbar: ['filter']
					,title: '用户数据表'
					,cols: [
						[{
							type: 'checkbox',
							fixed: 'left'
						}, {
							fixed: 'left',
							title: '操作',
							toolbar: '#test-table-toolbar-barDemo',
							width: 150
						}, {
							field: 'id',
							title: 'ID',
							width: 80,
							fixed: 'left',
							unresize: true,
							sort: true
						}, {
							field: 'username',
							title: '用户名',
							width: 120,
							edit: 'text'
						}, {
							field: 'email',
							title: '邮箱',
							width: 150,
							edit: 'text',
							templet: function(res) {
								return '<em>' + res.email + '</em>'
							}
						}, {
							field: 'sex',
							title: '性别',
							width: 80,
							edit: 'text',
							sort: true
						}, {
							field: 'city',
							title: '城市',
							width: 100
						}, {
							field: 'sign',
							title: '签名'
						}, {
							field: 'experience',
							title: '积分',
							width: 80,
							sort: true
						}, {
							field: 'ip',
							title: 'IP',
							width: 120
						}, {
							field: 'logins',
							title: '登入次数',
							width: 100,
							sort: true
						}, {
							field: 'joinTime',
							title: '加入时间',
							width: 120
						}]
					]
					,done: function(obj) {
						$(".layui-table-tool .layui-inline[lay-event='LAYTABLE_COLS']").css('border-right', '1px solid #d1d1d1').html("<i class='layui-icon layui-icon-cols'></i>显示列");
						// 表格下拉菜单初始化
						dropdown("#test-table-toolbar", obj.data, function (data) {
							// 拼接数组(几个数组代表几个按钮)
							var options = [
								{
									title: "查看", // 按钮显示内容
//									url: "http://baidu.com", // 按钮跳转地址（与event二选一）
							      	event: function () {
							           // 按钮触发事件
							           var i=2;
							           if(i===1){
							           	layer.open({
							           		type:1,
							           		area:['300px','300px'],
							           		content:'<div>内容是什么？</div>'
							           	})
							           }else{
							           		$(this).attr('lay-href','http://baidu.com')
							           }
							      	}
							   }
							];
							return options;
						})
					}
					,page: true
				});

				//头工具栏事件
				table.on('toolbar(test-table-toolbar)', function(obj) {
					var checkStatus = table.checkStatus(obj.config.id);
					switch(obj.event) {
						case 'getCheckData':
							var data = checkStatus.data;
							layer.alert(JSON.stringify(data));
							break;
						case 'getCheckLength':
							var data = checkStatus.data;
							layer.msg('选中了：' + data.length + ' 个');
							break;
						case 'isAll':
							layer.msg(checkStatus.isAll ? '全选' : '未全选');
							break;
					};
				});

				//监听行工具事件
				table.on('tool(test-table-toolbar)', function(obj) {
					var data = obj.data;
					if(obj.event === 'del') {
						layer.confirm('真的删除行么', function(index) {
							obj.del();
							layer.close(index);
						});
					} else if(obj.event === 'edit') {
						layer.prompt({
							formType: 2,
							value: data.email
						}, function(value, index) {
							obj.update({
								email: value
							});
							layer.close(index);
						});
					}
				});
				

			});
		</script>
	</body>

</html>